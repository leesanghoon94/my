- name: backend
  hosts: app
  remote_user: ec2-user
  become: true

  tasks:
    # - name: Tell the hots about our servers it might want to ssh to
    #   ansible.builtin.known_hosts:
    #     name: 10.1.1.133

    - name: Copy files
      ansible.builtin.copy:
        src: /var/lib/jenkins/workspace/backend/my/server
        dest: /home/ec2-user/

    - name: node install
      ansible.builtin.shell: |
        curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash
        . ~/.nvm/nvm.sh
        nvm install 16
        cd /home/ec2-user/server
        npm install
        npm start
